<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="world.festival.dao.UserMapper">

<!-- 회원가입 -->	
<insert id="registermember" parameterType="UserVO">
	INSERT INTO
		member(adminid, userid, username, userpwd, email)
	VALUES (
		null,
		#{userid},
		#{username},
		#{userpwd},
		#{email}
	)
</insert>

<!-- 중복체크 -->
<select id="idcheck" parameterType="String" resultType="int">
	SELECT
		count(*)
	FROM
		member
	WHERE
		userid = #{userid}
</select>

<!-- 회원정보 검색 -->
<select id="selectOne" parameterType="UserVO" resultType="UserVO">
	SELECT
		*
	FROM
		member
	WHERE
		userid = #{userid}
		<if test="userpwd != null">
		AND userpwd = #{userpwd}
		</if>
</select>

<!-- 회원 탈퇴 -->
<delete id="withdraw" parameterType="String">
	DELETE FROM
		member
	WHERE
		userid = #{id}
</delete>

<!-- 수정 출력 -->
<select id="select" parameterType="String" resultType="UserVO">
	SELECT
		*
	FROM
		member
	WHERE
		userid = #{userid}
</select>

<update id="updateMember" parameterType="UserVO">
	UPDATE
		member
	SET
		username = #{username},
			<if test="userpwd != null">
				userpwd = #{userpwd},		
			</if>
		email = #{email}
		<if test="originalFileName != null and savedFileName != null">
			, originalfileName = #{originalFileName} ,savedfileName = #{savedFileName}
		</if>
	WHERE
		userid = #{userid}
</update>

</mapper>